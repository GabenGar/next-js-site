# Gabengars

## Table of Contents

1. [Requirements](#requirements)
2. [Installation](#installation)
3. [Develop](#develop)
4. [Build](#build)
5. [Database](#database)
6. [TODOs](#todos)

## Requirements

NodeJS - 12.20+
PostgreSQL - 10+

## Installation

Clone repo:

```sh
git clone https://github.com/GabenGar/next-js-site.git
cd next-js-site
npm install
```

Create .env file and set the values:

```sh
npm run env
```

`SECRET_KEY` can be generated by:

```
openssl rand -base64 32
```

## Develop

Run the dev setup:

```sh
npm run dev
```

## Build

```sh
npm run build
```

The result will be inside `.next` folder.

## Database

### Create migration file:

```sh
npx node-pg-migrate create {migration_name} --migrations-dir src/database/migrations --migration-filename-format utc --migration-file-language sql
```

### Clean database:

```sh
npm run clean
```

This drops all project tables, including migrations ones.

### Reset database:

```sh
npm run reset
```

This truncates all non-migration project tables.

## TODOs
- figure out the problem between typescript, `ts-node` and  `stringify-object` being a pure ESM package.
- replace `$ref`s in generated schemas with references to the object/interface 
- figure out how to prepend `I` to interface names in the `json-schema-to-typescript` package.