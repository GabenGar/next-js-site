# Gabengars

## Table of Contents

1. [Requirements](#requirements)
2. [Installation](#installation)
3. [Develop](#develop)
4. [Build](#build)
5. [CLI](#cli)
6. [Database](#database)
7. [TODOs](#todos)

## Requirements

- NodeJS - 12.20+
- PostgreSQL - 10+

## Installation

Clone repo:

```sh
git clone https://github.com/GabenGar/next-js-site.git
cd next-js-site
npm install
```

Create .env file and set the values:

```sh
npm run env
```

`SECRET_KEY` can be generated by:

```
openssl rand -base64 32
```

## Develop

Run the dev setup:

```sh
npm run dev
```

## Build

```sh
npm run build
```

The result will be inside `.next` folder.

## CLI

CLI can be run with this base command:

```sh
npm run cli -- --help
```

Everything after `--` is passed to the CLI as arguments, so the command above will show the help command.

## Database

Dont's: https://wiki.postgresql.org/wiki/Don't_Do_This

### Create migration file:

```sh
npx node-pg-migrate create {migration_name} --migrations-dir src/database/migrations --migration-filename-format utc --migration-file-language sql
```

## MISC

Bind the specific ssh key to the git repo, courtesy of [github comment](https://gist.github.com/rbialek/1012262?permalink_comment_id=3730916#gistcomment-3730916):

```sh
git config core.sshCommand "ssh -i ~/.ssh/id_rsa_file -F /dev/null"
```

## TODOs

- one-button validation interface
- styled validation errors
- scripts relying on `config.json.schema` to work with ref schemas
- locale-specific date formatting
- pre-deploy validation
- CLI tool
- JSON Schema validated forms
- extendable layout
- comment threads
- multilang error pages
- abstract away per-page locale management
- exclude `database.schema.json` from the main codegen
- resolve the `BigInt` question
- development mock generation
- translation status per-file rundown
- ISR for `/profiles` and `/profile` pages